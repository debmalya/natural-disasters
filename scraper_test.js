const scraper = require('./scraper.js')
const GeoJSON = require('geojson')

scraper.scrapeHurricane('http://weather.unisys.com/hurricane/atlantic/tracks.atl')
.then(data => {
  console.log(data.features[998])
  console.log(data.features[999])
  console.log(data.features[1000])
})
.catch(err => console.error(err))

// let body = `50070 08/05/1978 M= 4  3 SNBR=1066 BESS        XING=0 SSS=0
// 50075 08/05*  0   0   0    0*  0   0   0    0*253 904  20 1012*251 910  20 1012*
// 50080 08/06*248 918  25 1011*245 925  30 1010*242 933  30 1009*239 940  35 1008*
// 50085 08/07*233 950  40 1007*228 957  40 1006*222 962  40 1005*216 966  45 1006*
// 50090 08/08*211 968  45 1007*204 969  40 1008*200 970  25 1010*  0   0   0    0*
// 50095 TS
// 50100 08/07/1978 M= 6  4 SNBR=1067 CORA        XING=0 SSS=0
// 50105 08/07*  0   0   0    0*  0   0   0    0*130 350  25 1010*134 362  25 1010*
// 50110 08/08*138 378  25 1009*139 396  30 1008*140 415  50 1003*140 432  65  990*
// 50115 08/09*140 449  80  980*139 468  80  980*136 486  70  988*132 506  65  998*
// 50120 08/10*128 528  60 1006*124 548  55 1007*122 568  55 1007*121 588  50 1008*
// 50125 08/11*120 609  45 1008*120 628  35 1008*121 648  30 1008*121 668  30 1009*
// 50130 08/12*122 688  30 1010*  0   0   0    0*  0   0   0    0*  0   0   0    0*
// 50135 HR
// 50140 08/26/1978 M= 4  5 SNBR=1068 DEBRA       XING=1 SSS=0
// 50145 08/26*  0   0   0    0*  0   0   0    0*234 884  25 1010*242 895  25    0*
// 50150 08/27*244 904  25    0*245 914  25 1008*246 923  25    0*251 931  25    0*
// 50155 08/28*258 938  25 1006*268 943  25    0*278 943  30    0*287 941  40 1002*
// 50160 08/29*296 936  50 1000*307 933  30    0*320 930  30 1002*342 927  15 1005*
// 50165 TS
// 50170 08/30/1978 M= 7  6 SNBR=1069 ELLA        XING=0 SSS=0
// 50175 08/30*262 597  20 1012*265 608  20 1011*270 620  30 1010*273 631  40 1005*
// 50180 08/31*276 642  50 1000*282 659  55  993*288 676  60  986*293 688  70  980*
// 50185 09/01*296 700  90  978*301 711 100  975*307 718 110  970*311 723 110  960*
// 50190 09/02*312 727 105  960*314 731 100  977*316 733  80  981*319 730  70  983*
// 50195 09/03*323 728  70  983*330 724  80  981*338 717  85  976*350 702  95  970*
// 50200 09/04*362 683 110  962*380 660 115  958*400 630 120  956*425 595 115  956*
// 50205 09/05*450 550 105  960*472 502  80  975*490 450  65  980E510 390  50  985*
// 50210 HR
// 50215 09/04/1978 M=13  7 SNBR=1070 FLOSSIE     XING=0 SSS=0
// 50220 09/04*120 390  25 1006*130 400  30    0*142 412  35    0*155 429  35    0*
// 50225 09/05*167 448  35    0*178 464  35    0*189 479  35    0*203 495  35    0*
// 50230 09/06*212 512  35    0*220 532  35    0*221 551  35    0*218 568  40 1003*
// 50235 09/07*217 580  40    0*218 590  40    0*222 600  40 1001*223 612  40    0*
// 50240 09/08*226 620  40    0*235 620  35 1005*243 611  35    0*250 605  30 1008*
// 50245 09/09*257 599  30    0*264 592  25 1010*272 583  25    0*277 573  25    0*
// 50250 09/10*282 561  25    0*286 548  30 1008*287 534  30    0*291 520  30    0*
// 50255 09/11*292 505  35 1005*299 491  45 1001*307 475  55  998*310 457  55    0*
// 50260 09/12*313 447  60  995*314 440  65  992*316 435  75  985*317 430  80  980*
// 50265 09/13*318 429  85  976*321 430  85    0*326 430  85    0*336 431  75  985*
// 50270 09/14*346 431  75    0*359 429  75    0*374 419  75    0*393 406  75    0*
// 50275 09/15*409 385  75    0*431 359  65  992*457 328  55  998*477 294  50    0*
// 50280 09/16E498 243  45 1000E515 190  45    0*  0   0   0    0*  0   0   0    0*
// 50285 HR`
//
// const regexHeader = new RegExp(/[0-9]+\s[0-9]{2}\/[0-9]{2}\/[0-9]{4}\s*M=\s*[0-9]+\s*[0-9]+\s*SNBR=\s*[0-9]+\s[\w\s]+XING=[0-1]\s*SSS=[0-9]/)
// const regexFooter = new RegExp(/[0-9]{5}\s*(HR|TS|SS)[A-Z0-9]*\s*/)
//
// const regexDateFull = new RegExp(/[0-9]{2}\/[0-9]{2}\/[0-9]{4}/)
// const regexDateMin = new RegExp(/[0-9]{2}\/[0-9]{2}/)
// const regexName = new RegExp(/[A-Z\s]+(?=XING)/)
// const regexLoc = new RegExp(/[0-9]{3}\s[0-9]{3}/)
//
// let objData = []
// let newObj = {};
//
// let dateFull, year, month, day, name, loc, lat, lng;
//
//
// const lines = body.split("\n")
//
// for(let line of lines){
//   /* HEADER */
//   if(regexHeader.test(line)){
//     dateFull = line.match(regexDateFull)[0]
//     year = dateFull.slice(-4)
//     name = line.match(regexName)[0].trim()
//
//
//   /* FOOTER */
//   }else if (regexFooter.test(line)) {
//
//
//   /* DATA IN THE MIDDLE */
//   }else{
//     dateMin = line.match(regexDateMin)[0]
//     month = dateMin.slice(0,2)
//     day = dateMin.slice(3)
//
//     loc = line.match(regexLoc)[0]
//     lat = `${loc[0]}${loc[1]}.${loc[2]}`
//     lng = `${loc[4]}${loc[5]}.${loc[6]}`
//
//     newObj = {
//       category: "Hurricane",
//       name: name,
//       year: year,
//       month: month,
//       day: day,
//       lat: lat,
//       lng: lng
//     }
//
//     objData.push(newObj)
//   }
// }
// console.log(GeoJSON.parse(objData, {Point: ['lat', 'lng']}))
